<mac:TabedSidePanel x:Class="ModengTerm.OfficialAddons.Snippet.SnippetPanel"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                    xmlns:mcsext="clr-namespace:ModengTerm.Controls;assembly=ModengTerm.Controls"
                    xmlns:mac="clr-namespace:ModengTerm.Addon.Controls;assembly=ModengTerm.Addon"
                    xmlns:converters="clr-namespace:ModengTerm.OfficialAddons.Snippet"
                    mc:Ignorable="d" 
                    d:DesignHeight="1024" d:DesignWidth="350">

    <UserControl.Resources>

        <converters:SnippetType2TextConverter x:Key="SnippetType2TextConverter"/>

        <Style x:Key="StyleButtonLocal" TargetType="{x:Type Button}" BasedOn="{StaticResource ResourceKey=StyleButton}">
            <Setter Property="Margin" Value="3"/>
            <Setter Property="Width" Value="70"/>
            <Setter Property="Height" Value="30"/>
        </Style>

        <Style x:Key="StyleTextBlockLocal" TargetType="{x:Type TextBlock}">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
        </Style>

        <Style x:Key="StyleTextBoxLocal" TargetType="{x:Type TextBox}" BasedOn="{StaticResource ResourceKey=StyleTextBox}">
            <Setter Property="Margin" Value="3"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style x:Key="StyleGroupBoxLocal" TargetType="{x:Type GroupBox}">
            <Setter Property="Margin" Value="3"/>
        </Style>

    </UserControl.Resources>

    <Grid Margin="3" Width="350">
        <Grid.RowDefinitions>
            <RowDefinition Height="250"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Visibility="Collapsed">
            <Border Background="{DynamicResource ResourceKey=RES66001E}"/>
            <StackPanel HorizontalAlignment="Left" Orientation="Horizontal" Margin="5,0,0,0">
                <mcsext:MdButton ToolTip="编辑" SVGPath="{StaticResource ResourceKey=SVG13E}"     
                                 Click="ButtonCreate_Click" Style="{StaticResource ResourceKey=StyleMdButtonTool}"/>
            </StackPanel>
        </Grid>

        <GroupBox Grid.Row="0" Header="编辑" Style="{StaticResource ResourceKey=StyleGroupBoxLocal}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="40"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="名称：" Style="{StaticResource ResourceKey=StyleTextBlockLocal}"/>
                <TextBox Grid.Row="0" Grid.Column="1" x:Name="TextBoxName" Style="{StaticResource ResourceKey=StyleTextBoxLocal}"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="类型：" Style="{StaticResource ResourceKey=StyleTextBlockLocal}"/>
                <ComboBox Grid.Row="1" Grid.Column="2" x:Name="ComboBoxSnippetTypes" Height="25" Margin="3,0,3,0" 
                          SelectionChanged="ComboBoxSnippetTypes_SelectionChanged" Style="{StaticResource ResourceKey=StyleComboBox}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource ResourceKey=SnippetType2TextConverter}}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="命令：" Margin="0,3,0,0" VerticalAlignment="Top" Style="{StaticResource ResourceKey=StyleTextBlockLocal}"/>
                <TextBox Grid.Row="2" Grid.Column="1" x:Name="TextBoxCommand" VerticalContentAlignment="Top" AcceptsReturn="True" Style="{StaticResource ResourceKey=StyleTextBoxLocal}"/>

                <TextBlock Grid.Row="3" Grid.Column="1" x:Name="TextBlockTips" Visibility="Collapsed" Margin="0,0,80,0" HorizontalAlignment="Right" VerticalAlignment="Center" Text="如果需要输入换行符，请在文本框内直接按回车" Foreground="Red"/>

                <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="新建" HorizontalAlignment="Right" Click="ButtonCreate_Click" Style="{StaticResource ResourceKey=StyleButtonLocal}"/>
                    <Button Content="更新" HorizontalAlignment="Right" Click="ButtonUpdate_Click" Style="{StaticResource ResourceKey=StyleButtonLocal}"/>
                    <Button Content="测试发送" HorizontalAlignment="Right" Click="ButtonSend_Click" Style="{StaticResource ResourceKey=StyleButtonLocal}"/>
                </StackPanel>

            </Grid>
        </GroupBox>

        <GroupBox Grid.Row="1" Header="命令列表">
            <ListBox x:Name="ListBoxSnippets" ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                     SelectionChanged="ListBoxSnippets_SelectionChanged">

                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Background="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="20"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock x:Name="TextBlock1" Text="{Binding Path=Name}" VerticalAlignment="Center"
                                       Margin="3,0,3,0"/>

                            <mcsext:MdButton Grid.Column="3" x:Name="ButtonDelete" SVGMargin="5" CornerRadius="2" ToolTip="删除" Tag="{Binding}" Visibility="Collapsed"
                                             SVGColor="{DynamicResource ResourceKey=RES65003E}" SVGMouseOverColor="{DynamicResource ResourceKey=RES65004E}" SVGMouseDownColor="{DynamicResource ResourceKey=RES65005E}"
                                             SVGPath="M512 466.944l233.472-233.472a31.744 31.744 0 0 1 45.056 45.056L557.056 512l233.472 233.472a31.744 31.744 0 0 1-45.056 45.056L512 557.056l-233.472 233.472a31.744 31.744 0 0 1-45.056-45.056L466.944 512 233.472 278.528a31.744 31.744 0 0 1 45.056-45.056z"
                                             Click="ButtonDeleteSnippet_Click" Style="{StaticResource ResourceKey=StyleMdButton}"/>

                            <!--Background="{DynamicResource ResourceKey=RES50016E}" MouseOverBrush="{DynamicResource ResourceKey=RES50017E}" MouseDownBrush="{DynamicResource ResourceKey=RES50018E}"-->
                            
                        </Grid>

                        <DataTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Visibility" Value="Visible" TargetName="ButtonDelete"/>
                            </Trigger>
                        </DataTemplate.Triggers>
                        
                    </DataTemplate>
                </ListBox.ItemTemplate>

                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel IsItemsHost="True"/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>

                <ListBox.Style>
                    <Style TargetType="{x:Type ListBox}" BasedOn="{StaticResource ResourceKey=StyleListBox}">
                        <Setter Property="Margin" Value="0,3,0,0"/>
                    </Style>
                </ListBox.Style>

                <ListBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource ResourceKey=StyleListBoxItem}">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderBrush" Value="{DynamicResource ResourceKey=RES65002E}"/>
                            </Trigger>
                        </Style.Triggers>
                        <Setter Property="Height" Value="30"/>
                        <Setter Property="MinWidth" Value="50"/>
                        <Setter Property="Margin" Value="5,5,0,0"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource ResourceKey=RES65001E}"/>
                        <Setter Property="BorderThickness" Value="1"/>
                    </Style>
                </ListBox.ItemContainerStyle>

            </ListBox>

        </GroupBox>

    </Grid>
</mac:TabedSidePanel>